<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>ÄÄƒng nháº­p - HaiAnh Shop</title>
    <link rel="stylesheet" href="style.css">
    <script>
        function handleLogin(event) {
            event.preventDefault(); // NgÄƒn form submit máº·c Ä‘á»‹nh

            // Láº¥y giÃ¡ trá»‹ tá»« form
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;

            try {
                // Láº¥y danh sÃ¡ch tÃ i khoáº£n tá»« localStorage
                let users = JSON.parse(localStorage.getItem("users")) || [];

                // Táº¡o tÃ i khoáº£n admin máº·c Ä‘á»‹nh náº¿u chÆ°a cÃ³
                const adminExists = users.find(user => user.username === "admin");
                if (!adminExists) {
                    users.push({ username: "admin", password: "admin@2025", role: "admin" });
                    localStorage.setItem("users", JSON.stringify(users));
                    console.log("TÃ i khoáº£n admin Ä‘Ã£ Ä‘Æ°á»£c táº¡o: admin/admin@2025");
                }

                // Kiá»ƒm tra tÃ i khoáº£n
                const user = users.find(user => user.username === username && user.password === password);
                if (user) {
                    // LÆ°u thÃ´ng tin ngÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Äƒng nháº­p
                    localStorage.setItem("currentUser", JSON.stringify(user));

                    // Chuyá»ƒn hÆ°á»›ng theo vai trÃ²
                    if (user.role === "admin") {
                        window.location.href = "admin.html";
                    } else {
                        window.location.href = "index.html";
                    }
                } else {
                    // Náº¿u sai tÃ i khoáº£n/máº­t kháº©u, hiá»ƒn thá»‹ thÃ´ng bÃ¡o
                    alert("TÃ i khoáº£n hoáº·c máº­t kháº©u khÃ´ng Ä‘Ãºng. Vui lÃ²ng thá»­ láº¡i!");
                }
            } catch (error) {
                // Náº¿u cÃ³ lá»—i khi truy xuáº¥t localStorage, thÃ´ng bÃ¡o vÃ  xÃ³a dá»¯ liá»‡u há»ng
                console.error("Lá»—i khi truy xuáº¥t localStorage:", error);
                alert("Dá»¯ liá»‡u tÃ i khoáº£n bá»‹ lá»—i. Äang xÃ³a dá»¯ liá»‡u vÃ  táº¡o láº¡i tÃ i khoáº£n admin...");
                localStorage.removeItem("users");
                localStorage.removeItem("currentUser");
                // Táº¡o láº¡i tÃ i khoáº£n admin
                let users = [];
                users.push({ username: "admin", password: "admin@2025", role: "admin" });
                localStorage.setItem("users", JSON.stringify(users));
                alert("ÄÃ£ táº¡o láº¡i tÃ i khoáº£n admin. Vui lÃ²ng thá»­ Ä‘Äƒng nháº­p láº¡i vá»›i: admin/admin@2025");
            }
        }

        // HÃ m kiá»ƒm tra tÃ i khoáº£n trong localStorage
        function checkAccounts() {
            try {
                const users = JSON.parse(localStorage.getItem("users")) || [];
                if (users.length === 0) {
                    alert("ChÆ°a cÃ³ tÃ i khoáº£n nÃ o trong localStorage. Äang táº¡o tÃ i khoáº£n admin...");
                    let newUsers = [];
                    newUsers.push({ username: "admin", password: "admin@2025", role: "admin" });
                    localStorage.setItem("users", JSON.stringify(newUsers));
                    alert("ÄÃ£ táº¡o tÃ i khoáº£n admin: admin/admin@2025");
                } else {
                    let message = "Danh sÃ¡ch tÃ i khoáº£n trong localStorage:\n";
                    users.forEach(user => {
                        message += `- TÃªn: ${user.username}, Máº­t kháº©u: ${user.password}, Vai trÃ²: ${user.role}\n`;
                    });
                    alert(message);
                }
            } catch (error) {
                alert("Lá»—i khi truy xuáº¥t localStorage: " + error.message + "\nÄang xÃ³a dá»¯ liá»‡u vÃ  táº¡o láº¡i tÃ i khoáº£n admin...");
                localStorage.removeItem("users");
                localStorage.removeItem("currentUser");
                let users = [];
                users.push({ username: "admin", password: "admin@2025", role: "admin" });
                localStorage.setItem("users", JSON.stringify(users));
                alert("ÄÃ£ táº¡o láº¡i tÃ i khoáº£n admin: admin/admin@2025");
            }
        }
    </script>
</head>
<body>
    <!-- Header (Giá»¯ nguyÃªn) -->
    <div class="header">
        <div class="logo"><a href="index.html">HaiAnh Shop</a></div>
        <div class="nav-menu">
            <div class="dropdown">
                <a href="#" class="dropdown-button">Danh má»¥c</a>
                <div class="dropdown-content">
                    <a href="#">Äiá»‡n thoáº¡i</a>
                    <a href="index.html">Laptop</a>
                    <a href="#">Äiá»‡n mÃ¡y</a>
                    <a href="#">Phá»¥ kiá»‡n</a>
                    <a href="#">ChuyÃªn trang Apple</a>
                    <a href="#">ChuyÃªn trang Samsung</a>
                    <a href="#">ChuyÃªn trang Xiaomi</a>
                    <a href="#">Tivi, Tá»§ láº¡nh, MÃ¡y láº¡nh - Äiá»‡n há»™</a>
                    <a href="#">MÃ¡y giáº·t, MÃ¡y sáº¥y, Tá»§ sáº¥y</a>
                    <a href="#">PC, MÃ¡y in, Äá»“ng há»“, MÃ¡y tÃ­nh báº£ng</a>
                    <a href="#">Quáº¡t, Quáº¡t Ä‘iá»u hÃ²a, MÃ¡y lá»c khÃ´ng khÃ­</a>
                    <a href="#">Robot hÃºt bá»¥i, MÃ¡y hÃºt bá»¥i, MÃ¡y lá»c KhÃ­</a>
                    <a href="#">MÃ¡y cÅ©</a>
                    <a href="#">Thá»‘ng tin hay</a>
                    <a href="#">Sim - Thanh toÃ¡n tiá»n Ã­ch</a>
                </div>
            </div>
        </div>
        <div class="search-bar">
            <input type="text" placeholder="Nháº­p tÃªn Ä‘iá»‡n thoáº¡i, mÃ¡y tÃ­nh, phá»¥ kiá»‡n... Ä‘á»ƒ tÃ¬m">
            <button type="submit">ğŸ”</button>
        </div>
        <div class="user-cart">
            <a href="login.html" class="login-icon">ÄÄƒng nháº­p</a>
            <a href="cart.html" class="cart-icon">Giá» hÃ ng</a>
        </div>
    </div>

    <!-- Breadcrumb (Giá»¯ nguyÃªn) -->
    <div class="breadcrumb">
        <a href="index.html">Trang chá»§</a> / <span>ÄÄƒng nháº­p</span>
    </div>

    <!-- Form ÄÄƒng nháº­p (Giá»¯ nguyÃªn) -->
    <div class="container">
        <div class="login-form">
            <h2>ÄÄƒng nháº­p</h2>
            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="username">TÃªn Ä‘Äƒng nháº­p:</label>
                    <input type="text" id="username" name="username" placeholder="Nháº­p tÃªn Ä‘Äƒng nháº­p" required>
                </div>
                <div class="form-group">
                    <label for="password">Máº­t kháº©u:</label>
                    <input type="password" id="password" name="password" placeholder="Nháº­p máº­t kháº©u" required>
                </div>
                <button type="submit" class="login-button">ÄÄƒng nháº­p</button>
                <p>ChÆ°a cÃ³ tÃ i khoáº£n? <a href="register.html">ÄÄƒng kÃ½ ngay</a></p>
            </form>
            <!-- NÃºt kiá»ƒm tra tÃ i khoáº£n -->
            <button onclick="checkAccounts()" style="margin-top: 10px; padding: 8px 16px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">Kiá»ƒm tra tÃ i khoáº£n</button>
        </div>
    </div>

    <!-- Footer (Chá»‰nh sá»­a vá»›i logo) -->
    <div class="footer">
        <p>LiÃªn há»‡: 1800-6601 | Email: support@haianhshop.vn</p>
        <div class="social-links">
            <a href="https://zalo.me" target="_blank" class="social-icon">
                <img src="https://cdn-icons-png.flaticon.com/512/124/124034.png" alt="Zalo" class="social-logo">
            </a>
            <a href="https://facebook.com" target="_blank" class="social-icon">
                <img src="https://cdn-icons-png.flaticon.com/512/124/124010.png" alt="Facebook" class="social-logo">
            </a>
            <a href="https://instagram.com" target="_blank" class="social-icon">
                <img src="https://cdn-icons-png.flaticon.com/512/124/124021.png" alt="Instagram" class="social-logo">
            </a>
            <a href="https://twitter.com" target="_blank" class="social-icon">
                <img src="https://cdn-icons-png.flaticon.com/512/124/124021.png" alt="Twitter" class="social-logo">
            </a>
        </div>
    </div>
</body>
</html>